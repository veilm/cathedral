<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>quill-night</title>
<style>
:root{
  --bg:#0e0e0f;
  --ink:#dcd6d0;
  --surface:#151516;
  --user:#a18876;            /* warm asphalt-rimmed sepia */
  --accent:#9c4242;          /* solitary candle flame */
  --rule:#2b2929;
  font-size:18px;
  line-height:1.66;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scrollbar-color:var(--rule) var(--bg);}
body{
  background:var(--bg);
  color:var(--ink);
  font-family:"Crimson Text","Georgia",serif;
  display:flex;
  flex-direction:column;
  height:100vh;
  padding:0 clamp(1rem,4vw,4rem);
}
header{
  flex-shrink:0;
  padding:1.4rem 0 1rem;
  border-bottom:1px solid var(--rule);
  font-size:.9rem;
  color:var(--user);
}
main{
  flex:1 1 auto;
  overflow:auto;
  padding:2rem 0;
}
.message{
  max-width:45rem;
  margin:0 auto 1.6rem;
  position:relative;
}
.user .text{
  font-family:inherit;
  font-weight:380;
  font-size:.95em;
  margin-left:1rem;
  text-indent:-.5rem;
  color:var(--user);
}
.collapsed{
  max-height:3.8em;
  overflow:hidden;
}
.expand{
  position:absolute;
  bottom:.1rem;
  right:0;
  background:0;
  border:0;
  color:var(--accent);
  font-size:.8rem;
  cursor:pointer;
  padding:.2rem .3rem;
  border-radius:2px;
}
.expand:hover{background:#ffffff08;}
hr{
  border:0;
  border-top:1px solid var(--rule);
  margin:1.6rem auto;
  max-width:45rem;
}
footer{
  flex-shrink:0;
  padding:1.2rem 0 2rem;
  border-top:1px solid var(--rule);
  display:flex;
  gap:.8rem;
  align-items:center;
  justify-content:center;
}
textarea{
  flex:1;
  max-width:45rem;
  border:0;
  background:var(--surface);
  color:var(--ink);
  font:inherit;
  resize:none;
  outline:none;
  padding:.6rem .8rem;
  border-radius:0;
  line-height:1.5;
}
::placeholder{color:var(--user); opacity:.55;}
#settings{
  position:fixed;
  bottom:1.2rem;
  right:1.4rem;
  width:24px;
  height:24px;
  cursor:pointer;
  opacity:.28;
  transition:.25s;
}
#settings:hover{opacity:.8;}
</style>
</head>
<body>
<header>quill-night</header>

<main id="chat">
  <div class="message">
    <p class="text">
      The page is ink, the letters breath. Write silver into darkness.
    </p>
  </div>
</main>

<footer>
  <textarea placeholder="converse in shadow…" rows="1"></textarea>
</footer>

<svg id="settings" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2">
  <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m11-7h-6m-6 0H1m20.4-4.6l-4.2 4.2m-12 12l-4.2 4.2m12-20.8l-4.2 4.2m-8.8-8.8l-4.2 4.2"/>
</svg>

<script>
/* same chat script as last drop; copy it verbatim */
function maybeCollapse(p){
  if(p.scrollHeight > 3.8 * parseFloat(getComputedStyle(p).fontSize)){
    p.classList.add('collapsed');
    const btn=document.createElement('button');
    btn.className='expand';
    btn.textContent='⋯';
    btn.onclick=()=>{
      p.classList.toggle('collapsed');
      btn.textContent = p.classList.contains('collapsed') ? '⋯' : '↑';
    };
    p.parentNode.appendChild(btn);
  }
}
document.querySelectorAll('.text').forEach(maybeCollapse);

const chat=document.getElementById('chat');
const ta=document.querySelector('textarea');
const send=()=>{
  const val=ta.value.trim();
  if(!val)return;
  const div=document.createElement('div');
  div.className='message user';
  div.innerHTML=`<p class="text">${val}</p>`;
  chat.appendChild(div); maybeCollapse(div.querySelector('p'));
  const hr=document.createElement('hr'); chat.appendChild(hr);

  setTimeout(()=>{
    const reply=document.createElement('div');
    reply.className='message';
    reply.innerHTML=`<p class="text">
      Every lamp in the cathedral of thought receives your line. Shadows bend.
    </p>`;
    chat.appendChild(reply); maybeCollapse(reply.querySelector('p'));
    hr.scrollIntoView({behavior:'smooth'});
  },700);
  ta.value='';
};
ta.addEventListener('keydown',e=>{
  if(e.key==='Enter' && !e.shiftKey){e.preventDefault();send();}
});
</script>
</body>
</html>
