<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>scripterium_noctis</title>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=IM+Fell+English+SC&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0b;
  --surface:#141414;
  --ink:#bbb;
  --burgundy:#59292b;
  font-size:clamp(16px,2.4vw,20px);
  color-scheme:dark;
}
*{margin:0;padding:0;box-sizing:border-box;scrollbar-width:none}
body{
  background:var(--bg);
  color:var(--ink);
  display:flex;
  flex-direction:column;
  height:100vh;
  overflow:hidden;
  font-family:"Crimson Text",serif;
  letter-spacing:.01em;
}
header{flex-shrink:0;padding:.8rem;font-size:12px;color:#444}
main{
  flex:1 1 auto;
  overflow:auto;
  padding:0 1rem 2rem;
  display:flex;
  flex-direction:column;
}
hr{
  border:0;
  height:1px;
  background:var(--burgundy);
  margin:.9rem 10%;
}
.message{
  max-width:680px;
  align-self:center;
  position:relative;
}
.user .text{margin-left:2rem;color:#999}
.collapsed{max-height:2.7em;overflow:hidden}
.expand{
  position:absolute;
  right:0;
  bottom:.2rem;
  background:transparent;
  border:0;
  color:var(--burgundy);
  font-size:.7rem;
  cursor:pointer;
}
footer{
  flex-shrink:0;
  background:var(--surface);
  padding:1.3rem;
  display:flex;
  position:relative;
}
textarea{
  width:100%;
  max-width:700px;
  background:transparent;
  color:var(--ink);
  border:0;
  outline:0;
  font:inherit;
  resize:none;
  line-height:1.5;
}
::placeholder{color:#444}
</style>
</head>
<body>
<header>scripterium noctis</header>

<main id="chat">
  <div class="message">
    <p class="text">
      In hushed cloisters the ink never dries.<br>
      Speak, and let parchment remember.
    </p>
  </div>
</main>

<footer>
  <textarea placeholder="scribe…" rows="1"></textarea>
</footer>

<script>
/* ink-bleed fade */
function bleed(){
  const m = document.querySelectorAll('.message');
  m.forEach(p=>p.style.animation='fadeIn .6s ease-out both');
}
window.addEventListener('load',bleed);

/* collapse helper */
document.addEventListener('DOMContentLoaded',()=>{
  const chat=document.getElementById('chat');
  const ta=document.querySelector('textarea');
  function maybeCollapse(p){
    if(p.scrollHeight>2.7*parseFloat(getComputedStyle(p).fontSize)){
      p.classList.add('collapsed');
      const btn=document.createElement('button');
      btn.className='expand'; btn.textContent='•••';
      btn.onclick=()=>{p.classList.toggle('collapsed');btn.textContent=p.classList.contains('collapsed')?'•••':'↑';}
      p.parentNode.appendChild(btn);
    }
  }
  function appendMsg(src,cls){
    const div=document.createElement('div');
    div.className='message '+cls;
    div.innerHTML=`<p class="text">${src}</p>`;
    chat.appendChild(div);
    maybeCollapse(div.querySelector('p'));
    div.querySelector('p').style.animation='fadeIn .6s ease-out both';
    div.scrollIntoView({behavior:'smooth'});
  }
  function send(){
    const val=ta.value.trim(); if(!val)return;
    appendMsg(val,'user');
    setTimeout(()=>{
      appendMsg('the candle sputters, but it has enough wax left for one more line…','');
    },900);
    ta.value='';
  }
  ta.addEventListener('keydown',e=>{
    if(e.key==='Enter' && !e.shiftKey){e.preventDefault();send();}
  });
});
/* fade keyframe injected inline */
const s=document.createElement('style');
s.innerText='@keyframes fadeIn{from{opacity:0}to{opacity:1}}';
document.head.appendChild(s);
</script>
</body>
</html>
