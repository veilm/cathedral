<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>cream-thread</title>
<style>
:root{
  --bg:#f9f8f6;
  --ink:#262626;
  --accent:#d4525f;
  font-family:"SF Compact","Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size:19px;
  line-height:1.6;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{
  height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:var(--bg);
  color:var(--ink);
}
#container{
  width:92%;
  max-width:480px;
  background:#ffffffe6;
  border-radius:30px 34px 32px 28px; /* wobble on purpose */
  box-shadow:0 3px 30px #0000000a;
  overflow:hidden;
  position:relative;
  animation: breathe 7s ease-in-out infinite;
}
@keyframes breathe{
  50%{border-radius:34px 30px 28px 32px;}
}
#grain{
  position:absolute;
  inset:0;
  mix-blend-mode: multiply;
  opacity:.45;
  pointer-events:none;
}
#chat{
  max-height:50vh;
  overflow-y:auto;
  padding:28px 32px;
  display:flex;
  flex-direction:column;
  gap:1.3rem;
}
#chat p{margin:0;}
.user{align-self:flex-end;color:var(--accent);}
.input-wrap{
  display:flex;
  border-top:1px solid #0001;
  padding:22px 32px 26px;
}
textarea{
  flex:1;
  border:0;
  background:0;
  color:var(--ink);
  font:inherit;
  resize:none;
  outline:none;
  height:24px;
  line-height:24px;
  padding:0;
}
::placeholder{color:#0007;}
button{
  margin-left:14px;
  background:transparent;
  border:0;
  color:var(--ink);
  cursor:pointer;
  font-size:18px;
}
</style>
</head>
<body>
  <div id="container">
    <canvas id="grain"></canvas>
    <div id="chat">
      <p>hello, friend. say anything—i’ll answer just before the tide pulls back.</p>
    </div>
    <div class="input-wrap">
      <textarea placeholder="type here…" rows="1"></textarea>
      <button aria-label="send">—></button>
    </div>
  </div>

<script>
/* whispery grain on the canvas */
const grain=()=>{
  const c=document.getElementById('grain'),ctx=c.getContext('2d');
  const resize=()=>{c.width=c.offsetWidth;c.height=c.offsetHeight;draw();};
  const draw=()=>{
    const img=ctx.createImageData(c.width,c.height);
    for(let i=0;i<img.data.length;i+=4){
      const grey=Math.floor(Math.random()*32)+220;         // linen hue
      img.data[i  ]=grey;
      img.data[i+1]=grey+4;
      img.data[i+2]=grey-4;
      img.data[i+3]=55;
    }
    ctx.putImageData(img,0,0);
  };
  window.addEventListener('resize',resize);
  resize();
};
grain();

/* minimal chat loop */
document.addEventListener('DOMContentLoaded',()=>{
  const chat=document.getElementById('chat');
  const ta=document.querySelector('textarea');
  const btn=document.querySelector('button');
  const add=(txt,cls)=>{
    const p=document.createElement('p');
    p.textContent=txt;
    p.className=cls;
    chat.appendChild(p);
    p.scrollIntoView({behavior:'smooth'});
  };
  const send=()=>{
    const val=ta.value.trim();
    if(!val)return;
    add(val,'user');
    ta.value='';
    setTimeout(()=>add('sometimes the only response is silence, but today a gentle curl of language will do.',''),600);
  };
  btn.onclick=send;
  ta.addEventListener('keydown',e=>{
    if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();send();}
  });
});
</script>
</body>
</html>
